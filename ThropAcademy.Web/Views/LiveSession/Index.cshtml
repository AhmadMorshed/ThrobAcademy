@model ThropAcademy.Web.Models.LiveSessionViewModel
@{
    ViewData["Title"] = "الجلسات المباشرة والدورات";
    // ❌ تم حذف تعريف متغيرات الألوان هنا ونقلها إلى CSS Custom Properties
}


@* ⚠️ ملاحظة: يمكنك دمج الروابط التالية في _Layout.cshtml *@
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&display=swap" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

<div class="container py-5">

    <h1 class="page-title text-center mb-5"><i class="fas fa-satellite-dish me-2"></i> @ViewData["Title"]</h1>

    <h2 class="section-heading mb-4"><i class="fas fa-broadcast-tower me-2"></i> الجلسات الحالية (LIVE)</h2>
    <div class="live-session-list">
        @if (Model.LiveSessions != null && Model.LiveSessions.Any())
        {
            @foreach (var session in Model.LiveSessions)
            {
                <div class="live-session-item shadow-sm">
                    <div class="session-info">
                        <h3 class="session-title">@session.Title</h3>
                        <p class="session-date"><i class="fas fa-calendar-alt me-1"></i> التاريخ: @session.Date.ToString("dd MMMM yyyy")</p>
                        <p class="session-number">Session #@session.Id</p>
                    </div>

                    <div class="session-links mt-3">
                        @if (!string.IsNullOrEmpty(session.DiscordLink))
                        {
                            <a href="@session.DiscordLink" class="btn btn-join-live discord-btn" target="_blank">
                                <i class="fab fa-discord me-2"></i> انضم عبر Discord
                            </a>
                        }
                        @if (!string.IsNullOrEmpty(session.VConnectLink))
                        {
                            <a href="@session.VConnectLink" class="btn btn-join-live vconnect-btn" target="_blank">
                                <i class="fas fa-video me-2"></i> انضم عبر vConnect
                            </a>
                        }
                    </div>
                </div>
            }
        }
        else
        {
            <div class="alert alert-info text-center">لا توجد جلسات مباشرة مجدولة حالياً.</div>
        }
    </div>

    <h2 class="section-heading mt-5 mb-4"><i class="fas fa-link me-2"></i> إدارة روابط الدورات</h2>
    <div class="course-list">
        @foreach (var course in Model.Courses)
        {
            <div class="course-item shadow-sm">
                <h3 class="course-title-manage">@course.Name</h3>
                <p class="course-description-manage">@course.Description</p>

                <form id="courseForm_@course.Id" onsubmit="event.preventDefault(); return saveLinks(@course.Id);">
                    <div class="form-group mb-3">
                        <label for="discordLink_@course.Id" class="form-label-custom">رابط Discord</label>
                        <input type="url" id="discordLink_@course.Id" name="discordLink" class="form-control form-control-modern" placeholder="رابط غرفة Discord" />
                    </div>

                    <div class="form-group mb-4">
                        <label for="vConnectLink_@course.Id" class="form-label-custom">رابط vConnect</label>
                        <input type="url" id="vConnectLink_@course.Id" name="vConnectLink" class="form-control form-control-modern" placeholder="رابط غرفة vConnect" />
                    </div>

                    <div class="form-group">
                        <button type="button" class="btn btn-join-action" id="joinButton_@course.Id">
                            <i class="fas fa-location-arrow me-2"></i> انضم الآن
                        </button>
                    </div>
                </form>
            </div>
        }
    </div>
</div>
@* 🟢 ربط ملف CSS الخارجي *@
<link rel="stylesheet" href="~/css/LiveSession/Index.css" />

@section Scripts {
    @* 🟢 ربط ملف JavaScript الخارجي *@
    <script src="~/js/LiveSession/Index.js"></script>
}